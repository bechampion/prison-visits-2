<%= render 'navigation', estate: @estate, visits: @requested_visits %>

<h2 class="heading-large"><%= t('.title') %></h2>

<% if @requested_visits.any? %>

  <table>
    <caption class="visuallyhidden"><%= t('.title') %></caption>
    <thead>
      <tr>
        <th><%= t('prisoner_name', scope: :shared) %></th>
        <th><%= t('prisoner_number', scope: :shared) %></th>
        <th><%= t('visit_date', scope: :shared) %></th>
        <th><%= t('time_slot', scope: :shared) %></th>
        <th><%= t('lead_visitor', scope: :shared) %></th>
        <th><%= t('tel', scope: :shared) %></th>
        <th><%= t('actions', scope: :shared) %></th>
      </tr>
    </thead>
    <tbody>
      <% @requested_visits.each do |visit| %>
        <tr>
          <td><%= visit.prisoner_full_name %></td>
          <td><%= visit.prisoner_number %></td>
          <td><%= visit.slots.first.to_date.to_s(:short_nomis) %></td>
          <td><%= format_slot_times(visit.slots.first) %></td>
          <td><%= visit.visitor_full_name %></td>
          <td><%= visit.contact_phone_no %></td>
          <td><%= link_to t('.process_link'), prison_visit_path(visit) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

<% else %>

  <p class="lede"><%= t('no_visits', scope: :shared) %></p>

<% end %>
