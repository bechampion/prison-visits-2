<% @requested_visits.group_by {|v| v.created_at.to_date}.each do |date, booking| %>
  <span class="text-secondary"><%= t('requested_on', scope: :shared) %></span>
  <h2 class="bold-medium"><%= date.to_s(:short) %></h2>
  <table class="table--hover push-bottom push-top--half">
    <caption class="visuallyhidden"><%= t('title', scope: [:prison, :dashboards, :inbox]) %></caption>
    <thead>
      <tr>
        <th></th>
        <th><%= t('prisoner_number', scope: :shared) %></th>
        <th><%= t('prisoner_name', scope: :shared) %></th>
        <th><%= t('dob', scope: :shared) %></th>
        <th><%= t('visit_date', scope: :shared) %></th>
        <th class="col-time"><%= t('time_slot', scope: :shared) %></th>
        <th><%= t('visitors', scope: :shared) %></th>
        <th><%= t('requested', scope: :shared) %></th>
        <th class="col-actions"><%= t('actions', scope: :shared) %></th>
      </tr>
    </thead>
    <tbody>
      <% booking.each do |visit| %>
        <%= render 'request_summary_row', visit: visit %>
        <%= render 'request_details_row', visit: visit %>
      <% end %>
    </tbody>
  </table>
<% end %>